<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Camera Test</title>
  <style>
    html,body{margin:0;height:100%;background:#000;overflow:hidden;}
    #v{width:100vw;height:100vh;object-fit:cover;}
    #btn{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);padding:12px 18px;border-radius:999px;border:0;font-size:16px;}
    #msg{position:fixed;left:12px;right:12px;bottom:12px;color:#fff;font:14px/1.4 system-ui;text-shadow:0 1px 4px rgba(0,0,0,.6);}
  </style>
</head>
<body>
  <video id="v" autoplay playsinline muted></video>
  <button id="btn">カメラ開始</button>
  <div id="msg">ボタンを押すとカメラ許可が出るはずです。</div>

  <script>
    const v = document.getElementById('v');
    const btn = document.getElementById('btn');
    const msg = document.getElementById('msg');

    btn.onclick = async () => {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" }, audio:false });
        v.srcObject = stream;
        btn.style.display = 'none';
        msg.textContent = 'カメラOK。';
      } catch (e) {
        msg.textContent = 'カメラ開始失敗: ' + e.name + ' / ' + e.message;
        alert(msg.textContent);
      }
    };
  </script>
</body>
</html>

